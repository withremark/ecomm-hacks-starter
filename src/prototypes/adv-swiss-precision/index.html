<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Swiss Precision - Product Placement Generator</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&family=DM+Sans:wght@400;500;700&display=swap');

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'DM Sans', sans-serif;
      background: #ffffff;
      color: #000000;
      height: 100vh;
      overflow: hidden;
    }

    .container {
      display: flex;
      height: 100vh;
      width: 100%;
    }

    /* Typography */
    .data {
      font-family: 'JetBrains Mono', monospace;
    }

    /* LEFT PANEL - Products */
    .panel-products {
      width: 220px;
      background: #ffffff;
      border-right: 1px solid #000000;
      padding: 16px;
      display: flex;
      flex-direction: column;
    }

    .panel-products h2 {
      font-size: 11px;
      font-weight: 700;
      margin-bottom: 16px;
      color: #000000;
      text-transform: uppercase;
      letter-spacing: 2px;
      border-bottom: 1px solid #000000;
      padding-bottom: 8px;
    }

    .products-list {
      flex: 1;
      overflow-y: auto;
    }

    .product-item {
      display: flex;
      align-items: center;
      padding: 8px 0;
      cursor: pointer;
      border-bottom: 1px solid #fafafa;
      transition: background 0.1s;
    }

    .product-item:hover {
      background: #fafafa;
    }

    .product-checkbox {
      width: 16px;
      height: 16px;
      border: 1px solid #000000;
      margin-right: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      background: #ffffff;
    }

    .product-item.selected .product-checkbox {
      background: #000000;
    }

    .product-item.selected .product-checkbox::after {
      content: '✓';
      color: #ffffff;
      font-size: 12px;
      font-weight: bold;
    }

    .product-code {
      font-family: 'JetBrains Mono', monospace;
      font-size: 11px;
      font-weight: 500;
      flex: 1;
    }

    .selection-count {
      font-family: 'JetBrains Mono', monospace;
      font-size: 11px;
      color: #000000;
      padding: 12px 0;
      border-top: 1px solid #000000;
      margin-top: auto;
    }

    /* CENTER PANEL - Parameters */
    .panel-parameters {
      width: 300px;
      background: #ffffff;
      border-right: 1px solid #000000;
      padding: 16px;
      display: flex;
      flex-direction: column;
    }

    .panel-parameters h2 {
      font-size: 11px;
      font-weight: 700;
      margin-bottom: 16px;
      color: #000000;
      text-transform: uppercase;
      letter-spacing: 2px;
      border-bottom: 1px solid #000000;
      padding-bottom: 8px;
    }

    .param-group {
      margin-bottom: 20px;
    }

    .param-group label {
      display: block;
      font-size: 10px;
      font-weight: 700;
      color: #000000;
      margin-bottom: 8px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .param-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .param-btn {
      background: #ffffff;
      border: 1px solid #000000;
      padding: 6px 12px;
      font-size: 11px;
      font-family: 'DM Sans', sans-serif;
      font-weight: 400;
      cursor: pointer;
      transition: all 0.1s;
      text-transform: none;
    }

    .param-btn:hover {
      background: #000000;
      color: #ffffff;
    }

    .param-btn.active {
      background: #000000;
      color: #ffffff;
    }

    .param-input {
      width: 100%;
      padding: 8px;
      border: 1px solid #000000;
      background: #ffffff;
      font-family: 'DM Sans', sans-serif;
      font-size: 11px;
      transition: background 0.1s;
    }

    .param-input:focus {
      outline: none;
      background: #fafafa;
    }

    .action-buttons {
      margin-top: auto;
      display: flex;
      flex-direction: column;
      gap: 8px;
      padding-top: 16px;
      border-top: 1px solid #000000;
    }

    .btn {
      width: 100%;
      padding: 12px;
      border: 1px solid #000000;
      background: #ffffff;
      font-family: 'DM Sans', sans-serif;
      font-size: 11px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
      cursor: pointer;
      transition: all 0.1s;
    }

    .btn:hover:not(:disabled) {
      background: #000000;
      color: #ffffff;
    }

    .btn:disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }

    .btn-primary {
      background: #000000;
      color: #ffffff;
    }

    .btn-primary:hover:not(:disabled) {
      background: #ffffff;
      color: #000000;
    }

    /* RIGHT PANEL - Preview Grid */
    .panel-preview {
      flex: 1;
      background: #fafafa;
      padding: 16px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
    }

    .panel-preview h2 {
      font-size: 11px;
      font-weight: 700;
      margin-bottom: 16px;
      color: #000000;
      text-transform: uppercase;
      letter-spacing: 2px;
      border-bottom: 1px solid #000000;
      padding-bottom: 8px;
    }

    .preview-stats {
      font-family: 'JetBrains Mono', monospace;
      font-size: 11px;
      margin-bottom: 16px;
      padding: 12px;
      background: #ffffff;
      border: 1px solid #000000;
    }

    .preview-stats div {
      margin-bottom: 4px;
    }

    .preview-stats div:last-child {
      margin-bottom: 0;
    }

    .preview-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 16px;
    }

    .preview-card {
      background: #ffffff;
      border: 1px solid #000000;
      cursor: pointer;
      transition: transform 0.1s;
      position: relative;
      aspect-ratio: 1;
    }

    .preview-card:hover {
      transform: translate(-2px, -2px);
      box-shadow: 2px 2px 0 #000000;
    }

    .preview-card img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .preview-card-overlay {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: #ffffff;
      border-top: 1px solid #000000;
      padding: 8px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 14px;
      font-weight: 500;
      text-align: center;
    }

    .empty-state {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: #666666;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.95);
      z-index: 1000;
      align-items: center;
      justify-content: center;
      padding: 40px;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      background: #ffffff;
      border: 1px solid #000000;
      max-width: 1200px;
      width: 100%;
      max-height: 100%;
      overflow-y: auto;
      position: relative;
    }

    .modal-close {
      position: absolute;
      top: 16px;
      right: 16px;
      background: #000000;
      color: #ffffff;
      border: none;
      width: 32px;
      height: 32px;
      font-size: 20px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.1s;
      z-index: 10;
    }

    .modal-close:hover {
      background: #ffffff;
      color: #000000;
      border: 1px solid #000000;
    }

    .modal-body {
      padding: 40px;
    }

    .modal-title {
      font-size: 14px;
      font-weight: 700;
      color: #000000;
      margin-bottom: 24px;
      text-transform: uppercase;
      letter-spacing: 2px;
      border-bottom: 1px solid #000000;
      padding-bottom: 12px;
    }

    .comparison-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
    }

    .comparison-item h3 {
      font-size: 10px;
      font-weight: 700;
      color: #000000;
      margin-bottom: 12px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .comparison-item img {
      width: 100%;
      border: 1px solid #000000;
      display: block;
    }

    .loading {
      text-align: center;
      padding: 40px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 11px;
      color: #000000;
      text-transform: uppercase;
      letter-spacing: 2px;
    }

    /* Scrollbar styling */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: #fafafa;
    }

    ::-webkit-scrollbar-thumb {
      background: #000000;
      border: 1px solid #ffffff;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #666666;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- LEFT PANEL: Products -->
    <div class="panel-products">
      <h2>Products</h2>
      <div class="products-list" id="productsList"></div>
      <div class="selection-count data">
        SELECTED: <span id="selectionCount">0</span>/<span id="totalCount">9</span>
      </div>
    </div>

    <!-- CENTER PANEL: Parameters -->
    <div class="panel-parameters">
      <h2>Parameters</h2>

      <div class="param-group">
        <label>Age</label>
        <div class="param-buttons" id="ageButtons"></div>
      </div>

      <div class="param-group">
        <label>Interests</label>
        <div class="param-buttons" id="interestButtons"></div>
      </div>

      <div class="param-group">
        <label>Scenes</label>
        <div class="param-buttons" id="sceneButtons"></div>
      </div>

      <div class="param-group" style="flex: 1;">
        <label>Filter</label>
        <input
          type="text"
          class="param-input"
          id="filterInput"
          placeholder="Semantic query..."
        >
      </div>

      <div class="action-buttons">
        <button class="btn btn-primary" id="generateBtn">Generate</button>
        <button class="btn" id="deployBtn" disabled>Deploy</button>
      </div>
    </div>

    <!-- RIGHT PANEL: Preview Grid -->
    <div class="panel-preview">
      <h2>Preview</h2>
      <div class="preview-stats data" id="previewStats" style="display: none;">
        <div>SELECTED: <span id="statsSelected">0</span></div>
        <div>GENERATED: <span id="statsGenerated">0</span></div>
      </div>
      <div id="previewContainer">
        <div class="empty-state">
          Select products and parameters, then generate
        </div>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal" id="modal">
    <div class="modal-content">
      <button class="modal-close" id="modalClose">×</button>
      <div class="modal-body">
        <h2 class="modal-title">Product Placement Preview</h2>
        <div class="comparison-grid" id="comparisonGrid"></div>
      </div>
    </div>
  </div>

  <script>
    // Product Data
    const PRODUCTS = [
      { id: 'prada-1', code: 'PRADA-1', name: 'Galleria', img: '/prototype-assets/products/prada-1.jpg' },
      { id: 'prada-2', code: 'PRADA-2', name: 'Re-Edition', img: '/prototype-assets/products/prada-2.jpg' },
      { id: 'prada-3', code: 'PRADA-3', name: 'Cleo', img: '/prototype-assets/products/prada-3.jpg' },
      { id: 'lv-1', code: 'LV-1', name: 'Neverfull', img: '/prototype-assets/products/lv-1.jpg' },
      { id: 'lv-2', code: 'LV-2', name: 'Speedy', img: '/prototype-assets/products/lv-2.jpg' },
      { id: 'lv-3', code: 'LV-3', name: 'Pochette', img: '/prototype-assets/products/lv-3.jpg' },
      { id: 'acne-1', code: 'ACNE-1', name: 'Musubi', img: '/prototype-assets/products/acne-1.jpg' },
      { id: 'acne-2', code: 'ACNE-2', name: 'Platt', img: '/prototype-assets/products/acne-2.jpg' },
      { id: 'acne-3', code: 'ACNE-3', name: 'Mini', img: '/prototype-assets/products/acne-3.jpg' },
    ];

    // Aesthetic Data
    const AESTHETICS = [
      { id: 'artist-studio', name: 'Artist Studio', img: '/prototype-assets/aesthetics/artist-studio.jpg' },
      { id: 'bookshop', name: 'Bookshop', img: '/prototype-assets/aesthetics/bookshop.jpg' },
      { id: 'boutique', name: 'Boutique', img: '/prototype-assets/aesthetics/boutique.jpg' },
      { id: 'cafe-table', name: 'Cafe Table', img: '/prototype-assets/aesthetics/cafe-table.jpg' },
      { id: 'cobblestone', name: 'Cobblestone', img: '/prototype-assets/aesthetics/cobblestone.jpg' },
      { id: 'palais-royal', name: 'Palais Royal', img: '/prototype-assets/aesthetics/palais-royal.jpg' },
      { id: 'rain-window', name: 'Rain Window', img: '/prototype-assets/aesthetics/rain-window.jpg' },
      { id: 'rooftop', name: 'Rooftop', img: '/prototype-assets/aesthetics/rooftop.jpg' },
      { id: 'seine-bank', name: 'Seine Bank', img: '/prototype-assets/aesthetics/seine-bank.jpg' },
      { id: 'tuileries', name: 'Tuileries', img: '/prototype-assets/aesthetics/tuileries.jpg' },
    ];

    const AGE_RANGES = ['18-24', '25-34', '35-44', '45-54', '55+'];
    const INTERESTS = ['Fashion', 'Home', 'Art', 'Luxury', 'Travel'];
    const SCENE_TYPES = ['Interior', 'Street', 'Outdoor', 'Studio'];

    // State
    let selectedProducts = new Set();
    let selectedAges = new Set(['25-34']);
    let selectedInterests = new Set(['Fashion']);
    let selectedScenes = new Set(['Interior']);
    let generatedPosts = [];

    // Initialize
    function init() {
      renderProducts();
      renderAges();
      renderInterests();
      renderScenes();
      setupEventListeners();
    }

    // Render Products (List with Checkboxes)
    function renderProducts() {
      const container = document.getElementById('productsList');
      container.innerHTML = PRODUCTS.map(product => `
        <div class="product-item" data-id="${product.id}">
          <div class="product-checkbox"></div>
          <span class="product-code">${product.code}</span>
        </div>
      `).join('');

      container.querySelectorAll('.product-item').forEach(item => {
        item.addEventListener('click', () => toggleProduct(item.dataset.id));
      });

      updateSelectionCount();
    }

    // Render Age Buttons
    function renderAges() {
      const container = document.getElementById('ageButtons');
      container.innerHTML = AGE_RANGES.map(age => `
        <button class="param-btn ${selectedAges.has(age) ? 'active' : ''}" data-age="${age}">[${age}]</button>
      `).join('');

      container.querySelectorAll('.param-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const age = btn.dataset.age;
          if (selectedAges.has(age)) {
            selectedAges.delete(age);
            btn.classList.remove('active');
          } else {
            selectedAges.add(age);
            btn.classList.add('active');
          }
        });
      });
    }

    // Render Interest Buttons
    function renderInterests() {
      const container = document.getElementById('interestButtons');
      container.innerHTML = INTERESTS.map(interest => `
        <button class="param-btn ${selectedInterests.has(interest) ? 'active' : ''}" data-interest="${interest}">[${interest}]</button>
      `).join('');

      container.querySelectorAll('.param-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const interest = btn.dataset.interest;
          if (selectedInterests.has(interest)) {
            selectedInterests.delete(interest);
            btn.classList.remove('active');
          } else {
            selectedInterests.add(interest);
            btn.classList.add('active');
          }
        });
      });
    }

    // Render Scene Buttons
    function renderScenes() {
      const container = document.getElementById('sceneButtons');
      container.innerHTML = SCENE_TYPES.map(scene => `
        <button class="param-btn ${selectedScenes.has(scene) ? 'active' : ''}" data-scene="${scene}">[${scene}]</button>
      `).join('');

      container.querySelectorAll('.param-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const scene = btn.dataset.scene;
          if (selectedScenes.has(scene)) {
            selectedScenes.delete(scene);
            btn.classList.remove('active');
          } else {
            selectedScenes.add(scene);
            btn.classList.add('active');
          }
        });
      });
    }

    // Toggle Product Selection
    function toggleProduct(id) {
      const item = document.querySelector(`.product-item[data-id="${id}"]`);
      if (selectedProducts.has(id)) {
        selectedProducts.delete(id);
        item.classList.remove('selected');
      } else {
        selectedProducts.add(id);
        item.classList.add('selected');
      }
      updateSelectionCount();
    }

    // Update Selection Count
    function updateSelectionCount() {
      document.getElementById('selectionCount').textContent = selectedProducts.size;
      document.getElementById('totalCount').textContent = PRODUCTS.length;
    }

    // Generate Mock Previews
    async function generate() {
      if (selectedProducts.size === 0) {
        alert('Please select at least one product');
        return;
      }

      const generateBtn = document.getElementById('generateBtn');
      const previewContainer = document.getElementById('previewContainer');
      const previewStats = document.getElementById('previewStats');

      generateBtn.disabled = true;
      generateBtn.textContent = 'Generating...';

      previewContainer.innerHTML = '<div class="loading">Generating previews...</div>';

      // Mock generation delay
      await new Promise(resolve => setTimeout(resolve, 1000));

      // Generate mock previews using aesthetics
      const selectedProductsArray = Array.from(selectedProducts);
      generatedPosts = [];

      // Create 6 mock posts (2 products x 3 aesthetics)
      for (let i = 0; i < Math.min(6, selectedProductsArray.length * 3); i++) {
        const productId = selectedProductsArray[i % selectedProductsArray.length];
        const product = PRODUCTS.find(p => p.id === productId);
        const aesthetic = AESTHETICS[i % AESTHETICS.length];

        // Mock confidence score
        const confidence = 94 - (i * 3);

        generatedPosts.push({
          product_id: productId,
          product_name: product.name,
          aesthetic_id: aesthetic.id,
          aesthetic_name: aesthetic.name,
          image_url: aesthetic.img,
          placed_image_url: aesthetic.img,
          confidence: confidence
        });
      }

      renderPreviews();

      // Update stats
      previewStats.style.display = 'block';
      document.getElementById('statsSelected').textContent = selectedProducts.size;
      document.getElementById('statsGenerated').textContent = generatedPosts.length;

      document.getElementById('deployBtn').disabled = false;
      generateBtn.disabled = false;
      generateBtn.textContent = 'Generate';
    }

    // Render Previews
    function renderPreviews() {
      const container = document.getElementById('previewContainer');

      if (generatedPosts.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            No posts generated
          </div>
        `;
        return;
      }

      const grid = document.createElement('div');
      grid.className = 'preview-grid';
      grid.innerHTML = generatedPosts.map((post, index) => `
        <div class="preview-card" data-index="${index}">
          <img src="${post.image_url}" alt="${post.aesthetic_name}" loading="lazy">
          <div class="preview-card-overlay data">${post.confidence}%</div>
        </div>
      `).join('');

      grid.querySelectorAll('.preview-card').forEach(card => {
        card.addEventListener('click', () => showModal(parseInt(card.dataset.index)));
      });

      container.innerHTML = '';
      container.appendChild(grid);
    }

    // Show Modal
    function showModal(index) {
      const post = generatedPosts[index];
      const modal = document.getElementById('modal');
      const comparisonGrid = document.getElementById('comparisonGrid');

      const product = PRODUCTS.find(p => p.id === post.product_id);

      comparisonGrid.innerHTML = `
        <div class="comparison-item">
          <h3>Original Scene</h3>
          <img src="${post.image_url}" alt="Original">
        </div>
        <div class="comparison-item">
          <h3>With ${product.code} Placement</h3>
          <img src="${post.placed_image_url}" alt="Placed">
        </div>
      `;

      modal.classList.add('active');
    }

    // Close Modal
    function closeModal() {
      document.getElementById('modal').classList.remove('active');
    }

    // Deploy
    async function deploy() {
      if (generatedPosts.length === 0) {
        alert('No posts to deploy');
        return;
      }

      const deployBtn = document.getElementById('deployBtn');
      deployBtn.disabled = true;
      deployBtn.textContent = 'Deploying...';

      await new Promise(resolve => setTimeout(resolve, 1000));

      alert(`Deployed ${generatedPosts.length} posts successfully!`);

      deployBtn.disabled = false;
      deployBtn.textContent = 'Deploy';
    }

    // Event Listeners
    function setupEventListeners() {
      document.getElementById('generateBtn').addEventListener('click', generate);
      document.getElementById('deployBtn').addEventListener('click', deploy);
      document.getElementById('modalClose').addEventListener('click', closeModal);
      document.getElementById('modal').addEventListener('click', (e) => {
        if (e.target.id === 'modal') closeModal();
      });
    }

    // Initialize on load
    init();
  </script>
</body>
</html>
