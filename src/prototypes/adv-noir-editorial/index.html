<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Noir Editorial - Campaign Builder</title>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600&display=swap" rel="stylesheet">

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --bg-main: #0a0a0a;
      --bg-surface: #141414;
      --border: #2a2a2a;
      --text-primary: #ffffff;
      --text-muted: #888888;
      --accent-gold: #c9a962;
      --success: #4ade80;
      --transition: 0.3s ease;
    }

    body {
      font-family: 'Satoshi', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
      background: var(--bg-main);
      color: var(--text-primary);
      overflow: hidden;
      height: 100vh;
      width: 100vw;
    }

    h1, h2, h3 {
      font-family: 'Playfair Display', serif;
      font-weight: 600;
      letter-spacing: 0.02em;
    }

    .label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--text-muted);
      margin-bottom: 12px;
      display: block;
    }

    /* Main Layout */
    .container {
      display: flex;
      height: 100vh;
      width: 100vw;
      gap: 24px;
      padding: 24px;
    }

    /* Left Panel - Collection */
    .collection-panel {
      width: 240px;
      background: var(--bg-surface);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 24px;
      display: flex;
      flex-direction: column;
      overflow-y: auto;
      animation: fadeInLeft 0.6s ease;
    }

    @keyframes fadeInLeft {
      from { opacity: 0; transform: translateX(-20px); }
      to { opacity: 1; transform: translateX(0); }
    }

    .hero-product {
      width: 100%;
      aspect-ratio: 1;
      object-fit: cover;
      border-radius: 4px;
      margin-bottom: 20px;
      border: 2px solid transparent;
      transition: var(--transition);
    }

    .brand-info {
      margin-bottom: 24px;
    }

    .brand-info h2 {
      font-size: 18px;
      margin-bottom: 4px;
    }

    .selected-count {
      font-size: 13px;
      color: var(--text-muted);
    }

    .selected-count span {
      color: var(--accent-gold);
      font-weight: 600;
    }

    .product-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
      margin-top: 16px;
    }

    .product-thumb {
      aspect-ratio: 1;
      object-fit: cover;
      border-radius: 4px;
      cursor: pointer;
      border: 2px solid transparent;
      transition: var(--transition);
      opacity: 0.7;
    }

    .product-thumb:hover {
      opacity: 1;
      transform: scale(1.05);
    }

    .product-thumb.selected {
      border-color: var(--accent-gold);
      opacity: 1;
      box-shadow: 0 0 20px rgba(201, 169, 98, 0.3);
    }

    /* Middle Panel - Targeting */
    .targeting-panel {
      width: 320px;
      background: var(--bg-surface);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 32px;
      display: flex;
      flex-direction: column;
      gap: 32px;
      overflow-y: auto;
      animation: fadeInUp 0.6s ease 0.1s backwards;
    }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .targeting-section h3 {
      font-size: 14px;
      margin-bottom: 16px;
    }

    .chip-group {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .chip {
      padding: 8px 16px;
      border-radius: 20px;
      border: 1px solid var(--border);
      background: transparent;
      color: var(--text-primary);
      font-size: 13px;
      cursor: pointer;
      transition: var(--transition);
    }

    .chip:hover {
      border-color: var(--accent-gold);
      background: rgba(201, 169, 98, 0.1);
    }

    .chip.active {
      background: var(--accent-gold);
      border-color: var(--accent-gold);
      color: var(--bg-main);
      font-weight: 500;
    }

    .semantic-input {
      width: 100%;
      min-height: 100px;
      background: var(--bg-main);
      border: 1px solid var(--border);
      border-radius: 4px;
      padding: 12px;
      color: var(--text-primary);
      font-family: inherit;
      font-size: 14px;
      resize: vertical;
      transition: var(--transition);
    }

    .semantic-input:focus {
      outline: none;
      border-color: var(--accent-gold);
      box-shadow: 0 0 0 3px rgba(201, 169, 98, 0.1);
    }

    .semantic-input::placeholder {
      color: var(--text-muted);
    }

    .divider {
      height: 1px;
      background: var(--border);
      margin: 16px 0;
    }

    .action-buttons {
      display: flex;
      gap: 12px;
    }

    .btn {
      flex: 1;
      padding: 14px 24px;
      border-radius: 4px;
      border: none;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .btn-primary {
      background: var(--accent-gold);
      color: var(--bg-main);
    }

    .btn-primary:hover {
      background: #d4b56f;
      box-shadow: 0 0 30px rgba(201, 169, 98, 0.4);
    }

    .btn-secondary {
      background: transparent;
      color: var(--text-primary);
      border: 1px solid var(--border);
    }

    .btn-secondary:hover {
      border-color: var(--accent-gold);
      color: var(--accent-gold);
    }

    /* Right Panel - Placements */
    .placements-panel {
      flex: 1;
      background: var(--bg-surface);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 32px;
      overflow-y: auto;
      animation: fadeInRight 0.6s ease 0.2s backwards;
    }

    @keyframes fadeInRight {
      from { opacity: 0; transform: translateX(20px); }
      to { opacity: 1; transform: translateX(0); }
    }

    .placements-header {
      margin-bottom: 24px;
    }

    .placements-header h2 {
      font-size: 24px;
      margin-bottom: 8px;
    }

    .placements-subtitle {
      font-size: 13px;
      color: var(--text-muted);
    }

    /* Masonry Grid */
    .masonry-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 16px;
    }

    .aesthetic-card {
      position: relative;
      border-radius: 4px;
      overflow: hidden;
      cursor: pointer;
      transition: var(--transition);
      animation: fadeIn 0.6s ease backwards;
    }

    @keyframes fadeIn {
      from { opacity: 0; scale: 0.95; }
      to { opacity: 1; scale: 1; }
    }

    .aesthetic-card:nth-child(1) { animation-delay: 0.3s; }
    .aesthetic-card:nth-child(2) { animation-delay: 0.35s; }
    .aesthetic-card:nth-child(3) { animation-delay: 0.4s; }
    .aesthetic-card:nth-child(4) { animation-delay: 0.45s; }
    .aesthetic-card:nth-child(5) { animation-delay: 0.5s; }
    .aesthetic-card:nth-child(6) { animation-delay: 0.55s; }
    .aesthetic-card:nth-child(7) { animation-delay: 0.6s; }
    .aesthetic-card:nth-child(8) { animation-delay: 0.65s; }
    .aesthetic-card:nth-child(9) { animation-delay: 0.7s; }
    .aesthetic-card:nth-child(10) { animation-delay: 0.75s; }

    .aesthetic-card:hover {
      transform: translateY(-4px);
    }

    .aesthetic-card img {
      width: 100%;
      aspect-ratio: 4/5;
      object-fit: cover;
      display: block;
    }

    .match-badge {
      position: absolute;
      top: 12px;
      right: 12px;
      background: var(--accent-gold);
      color: var(--bg-main);
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
    }

    .aesthetic-overlay {
      position: absolute;
      inset: 0;
      background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 16px;
      opacity: 0;
      transition: var(--transition);
    }

    .aesthetic-card:hover .aesthetic-overlay {
      opacity: 1;
    }

    .aesthetic-name {
      font-size: 14px;
      font-weight: 500;
      margin-bottom: 8px;
    }

    .test-btn {
      padding: 8px 16px;
      background: var(--accent-gold);
      color: var(--bg-main);
      border: none;
      border-radius: 4px;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      transition: var(--transition);
    }

    .test-btn:hover {
      background: #d4b56f;
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.9);
      z-index: 1000;
      align-items: center;
      justify-content: center;
      padding: 48px;
      animation: fadeIn 0.3s ease;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      background: var(--bg-surface);
      border: 1px solid var(--border);
      border-radius: 8px;
      max-width: 1200px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      padding: 48px;
      animation: scaleIn 0.3s ease;
    }

    @keyframes scaleIn {
      from { transform: scale(0.95); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 32px;
    }

    .modal-header h2 {
      font-size: 28px;
    }

    .close-btn {
      background: none;
      border: none;
      color: var(--text-muted);
      font-size: 32px;
      cursor: pointer;
      transition: var(--transition);
      line-height: 1;
    }

    .close-btn:hover {
      color: var(--text-primary);
    }

    .comparison {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 32px;
      margin-bottom: 32px;
    }

    .comparison-item {
      text-align: center;
    }

    .comparison-item img {
      width: 100%;
      border-radius: 4px;
      margin-bottom: 16px;
    }

    .comparison-item .label {
      text-align: center;
    }

    .modal-actions {
      display: flex;
      gap: 16px;
      justify-content: center;
    }

    .loading-state {
      display: none;
      text-align: center;
      padding: 48px;
    }

    .loading-state.active {
      display: block;
    }

    .spinner {
      width: 48px;
      height: 48px;
      border: 3px solid var(--border);
      border-top-color: var(--accent-gold);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 24px;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Custom Scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: var(--bg-main);
    }

    ::-webkit-scrollbar-thumb {
      background: var(--border);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--text-muted);
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Left Panel: Collection -->
    <div class="collection-panel">
      <img id="heroProduct" class="hero-product" src="" alt="Hero Product">
      <div class="brand-info">
        <h2 id="brandName">PRADA</h2>
        <div class="selected-count">
          Selected: <span id="selectedCount">0</span> / <span id="totalCount">9</span>
        </div>
      </div>
      <span class="label">Product Collection</span>
      <div class="product-grid" id="productGrid"></div>
    </div>

    <!-- Middle Panel: Targeting -->
    <div class="targeting-panel">
      <div class="targeting-section">
        <span class="label">Demographics</span>
        <div class="chip-group">
          <button class="chip" data-type="demo">18-24</button>
          <button class="chip active" data-type="demo">25-34</button>
          <button class="chip" data-type="demo">35-44</button>
          <button class="chip" data-type="demo">45+</button>
        </div>
      </div>

      <div class="targeting-section">
        <span class="label">Interests</span>
        <div class="chip-group">
          <button class="chip active" data-type="interest">Luxury Fashion</button>
          <button class="chip active" data-type="interest">Travel</button>
          <button class="chip" data-type="interest">Art & Design</button>
          <button class="chip" data-type="interest">Fine Dining</button>
          <button class="chip" data-type="interest">Photography</button>
        </div>
      </div>

      <div class="targeting-section">
        <span class="label">Scene Filter</span>
        <div class="chip-group">
          <button class="chip active" data-type="scene">Parisian Café</button>
          <button class="chip" data-type="scene">Urban Streets</button>
          <button class="chip" data-type="scene">Minimalist Studio</button>
          <button class="chip active" data-type="scene">Boutique Interior</button>
        </div>
      </div>

      <div class="targeting-section">
        <span class="label">Semantic Description</span>
        <textarea
          class="semantic-input"
          placeholder="Describe the ideal placement context... e.g., 'Sophisticated Parisian lifestyle, soft natural lighting, editorial quality'"
        ></textarea>
      </div>

      <div class="divider"></div>

      <div class="action-buttons">
        <button class="btn btn-primary" onclick="generatePlacements()">Generate</button>
        <button class="btn btn-secondary" onclick="deployCampaign()">Deploy</button>
      </div>
    </div>

    <!-- Right Panel: Placements -->
    <div class="placements-panel">
      <div class="placements-header">
        <h2>Aesthetic Placements</h2>
        <div class="placements-subtitle">AI-generated contexts matching your product collection</div>
      </div>
      <div class="masonry-grid" id="aestheticGrid"></div>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal" id="placementModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modalTitle">Placement Preview</h2>
        <button class="close-btn" onclick="closeModal()">&times;</button>
      </div>

      <div id="modalBody">
        <div class="comparison">
          <div class="comparison-item">
            <span class="label">Original Aesthetic</span>
            <img id="originalImage" src="" alt="Original">
          </div>
          <div class="comparison-item">
            <span class="label">Product Placement</span>
            <img id="placedImage" src="" alt="Placed Product">
          </div>
        </div>

        <div class="modal-actions">
          <button class="btn btn-primary" onclick="regeneratePlacement()">Regenerate</button>
          <button class="btn btn-secondary" onclick="approvePlacement()">Approve</button>
        </div>
      </div>

      <div class="loading-state" id="modalLoading">
        <div class="spinner"></div>
        <p>Generating product placement...</p>
      </div>
    </div>
  </div>

  <script>
    // Product Data
    const PRODUCTS = [
      { id: 'prada-1', brand: 'PRADA', name: 'Galleria Bag', img: '/prototype-assets/products/prada-1.jpg' },
      { id: 'prada-2', brand: 'PRADA', name: 'Re-Edition', img: '/prototype-assets/products/prada-2.jpg' },
      { id: 'prada-3', brand: 'PRADA', name: 'Cleo Shoulder', img: '/prototype-assets/products/prada-3.jpg' },
      { id: 'lv-1', brand: 'LOUIS VUITTON', name: 'Neverfull MM', img: '/prototype-assets/products/lv-1.jpg' },
      { id: 'lv-2', brand: 'LOUIS VUITTON', name: 'Speedy 25', img: '/prototype-assets/products/lv-2.jpg' },
      { id: 'lv-3', brand: 'LOUIS VUITTON', name: 'Pochette', img: '/prototype-assets/products/lv-3.jpg' },
      { id: 'acne-1', brand: 'ACNE STUDIOS', name: 'Musubi Bag', img: '/prototype-assets/products/acne-1.jpg' },
      { id: 'acne-2', brand: 'ACNE STUDIOS', name: 'Platt Tote', img: '/prototype-assets/products/acne-2.jpg' },
      { id: 'acne-3', brand: 'ACNE STUDIOS', name: 'Mini Bag', img: '/prototype-assets/products/acne-3.jpg' },
    ];

    // Aesthetic Data
    const AESTHETICS = [
      { id: 'cafe', name: 'Café Table', img: '/prototype-assets/aesthetics/cafe-table.jpg', match: 94 },
      { id: 'boutique', name: 'Boutique', img: '/prototype-assets/aesthetics/boutique.jpg', match: 91 },
      { id: 'rooftop', name: 'Rooftop', img: '/prototype-assets/aesthetics/rooftop.jpg', match: 88 },
      { id: 'seine', name: 'Seine Bank', img: '/prototype-assets/aesthetics/seine-bank.jpg', match: 85 },
      { id: 'tuileries', name: 'Tuileries', img: '/prototype-assets/aesthetics/tuileries.jpg', match: 82 },
      { id: 'palais', name: 'Palais Royal', img: '/prototype-assets/aesthetics/palais-royal.jpg', match: 79 },
      { id: 'artist', name: 'Artist Studio', img: '/prototype-assets/aesthetics/artist-studio.jpg', match: 76 },
      { id: 'bookshop', name: 'Bookshop', img: '/prototype-assets/aesthetics/bookshop.jpg', match: 73 },
      { id: 'cobblestone', name: 'Cobblestone', img: '/prototype-assets/aesthetics/cobblestone.jpg', match: 70 },
      { id: 'rain', name: 'Rain Window', img: '/prototype-assets/aesthetics/rain-window.jpg', match: 67 },
    ];

    // State
    let selectedProducts = new Set();
    let currentAesthetic = null;

    // Initialize
    function init() {
      renderProducts();
      renderAesthetics();
      setupChips();

      // Set default hero to first PRADA product
      document.getElementById('heroProduct').src = PRODUCTS[0].img;
      document.getElementById('totalCount').textContent = PRODUCTS.length;
    }

    // Render Products
    function renderProducts() {
      const grid = document.getElementById('productGrid');
      grid.innerHTML = '';

      PRODUCTS.forEach(product => {
        const img = document.createElement('img');
        img.src = product.img;
        img.alt = product.name;
        img.className = 'product-thumb';
        img.dataset.id = product.id;
        img.onclick = () => toggleProduct(product.id);
        grid.appendChild(img);
      });
    }

    // Toggle Product Selection
    function toggleProduct(id) {
      const img = document.querySelector(`img[data-id="${id}"]`);

      if (selectedProducts.has(id)) {
        selectedProducts.delete(id);
        img.classList.remove('selected');
      } else {
        selectedProducts.add(id);
        img.classList.add('selected');

        // Update hero to this product
        const product = PRODUCTS.find(p => p.id === id);
        document.getElementById('heroProduct').src = product.img;
        document.getElementById('brandName').textContent = product.brand;
      }

      document.getElementById('selectedCount').textContent = selectedProducts.size;
    }

    // Render Aesthetics
    function renderAesthetics() {
      const grid = document.getElementById('aestheticGrid');
      grid.innerHTML = '';

      AESTHETICS.forEach(aesthetic => {
        const card = document.createElement('div');
        card.className = 'aesthetic-card';
        card.onclick = () => openPlacementModal(aesthetic);

        card.innerHTML = `
          <img src="${aesthetic.img}" alt="${aesthetic.name}">
          <div class="match-badge">${aesthetic.match}%</div>
          <div class="aesthetic-overlay">
            <div class="aesthetic-name">${aesthetic.name}</div>
            <button class="test-btn" onclick="event.stopPropagation(); openPlacementModal(${JSON.stringify(aesthetic).replace(/"/g, '&quot;')})">
              Test Placement
            </button>
          </div>
        `;

        grid.appendChild(card);
      });
    }

    // Setup Chips
    function setupChips() {
      document.querySelectorAll('.chip').forEach(chip => {
        chip.onclick = () => {
          chip.classList.toggle('active');
        };
      });
    }

    // Open Placement Modal
    function openPlacementModal(aesthetic) {
      currentAesthetic = aesthetic;
      const modal = document.getElementById('placementModal');
      const modalBody = document.getElementById('modalBody');
      const loading = document.getElementById('modalLoading');

      document.getElementById('modalTitle').textContent = `${aesthetic.name} Placement`;
      document.getElementById('originalImage').src = aesthetic.img;

      // Show loading
      modalBody.style.display = 'none';
      loading.classList.add('active');
      modal.classList.add('active');

      // Simulate placement generation (replace with actual API call)
      setTimeout(() => {
        // For demo, use the same image (in production, this would be the placed version)
        document.getElementById('placedImage').src = aesthetic.img;

        loading.classList.remove('active');
        modalBody.style.display = 'block';
      }, 2000);
    }

    // Close Modal
    function closeModal() {
      document.getElementById('placementModal').classList.remove('active');
    }

    // Regenerate Placement
    function regeneratePlacement() {
      const modalBody = document.getElementById('modalBody');
      const loading = document.getElementById('modalLoading');

      modalBody.style.display = 'none';
      loading.classList.add('active');

      // Simulate regeneration
      setTimeout(() => {
        loading.classList.remove('active');
        modalBody.style.display = 'block';
      }, 2000);
    }

    // Approve Placement
    function approvePlacement() {
      alert(`Placement approved for ${currentAesthetic.name}!`);
      closeModal();
    }

    // Generate Placements
    function generatePlacements() {
      if (selectedProducts.size === 0) {
        alert('Please select at least one product from the collection.');
        return;
      }

      alert(`Generating placements for ${selectedProducts.size} selected products...`);
      // In production, this would call the backend API
    }

    // Deploy Campaign
    function deployCampaign() {
      if (selectedProducts.size === 0) {
        alert('Please select at least one product before deploying.');
        return;
      }

      const selectedChips = document.querySelectorAll('.chip.active');
      if (selectedChips.length === 0) {
        alert('Please select targeting criteria.');
        return;
      }

      alert(`Deploying campaign with ${selectedProducts.size} products to ${selectedChips.length} targeting segments...`);
    }

    // Initialize on load
    init();
  </script>
</body>
</html>
